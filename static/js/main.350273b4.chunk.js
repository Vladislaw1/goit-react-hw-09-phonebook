(this["webpackJsonpgoit-react-hw-09-auth"]=this["webpackJsonpgoit-react-hw-09-auth"]||[]).push([[0],{20:function(e,t,n){e.exports={link:"SiteNav_link__2VyMl",activeLink:"SiteNav_activeLink__1doie"}},22:function(e,t,n){e.exports={wrapper:"RegisteView_wrapper__2W20d",signin:"RegisteView_signin__1iQEX"}},26:function(e,t,n){e.exports={formAdd:"addContactForm_formAdd__3hoFo",label:"addContactForm_label__37-ll",input:"addContactForm_input__fH8nd",btnAdd:"addContactForm_btnAdd__2ebLp"}},27:function(e,t,n){e.exports={wrapper:"LoginView_wrapper__25O_t",signin:"LoginView_signin__1qvIa"}},28:function(e,t,n){e.exports={link:"AuthNav_link__Jnr6j",activeLink:"AuthNav_activeLink__xKhUw"}},37:function(e,t,n){e.exports={btnDelete:"ContactListItem_btnDelete__cMIqC",contactListItem:"ContactListItem_contactListItem__coLxw"}},48:function(e,t,n){e.exports={contactList:"ContactList_contactList__36xcj"}},86:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(30),o=n.n(r),s=n(7),u=n(4),i=n(1),b=function(){return Object(i.jsx)("div",{children:Object(i.jsx)("p",{children:"Hello User"})})},j=n(18),l=n(3),O=n(5),d=n(19),p=n.n(d),f={name:"",number:""},m={placeholder:"Name",autoComplete:"off",type:"text",name:"name",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:"required"},h={placeholder:"Number",autoComplete:"off",type:"tel",name:"number",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:"required"},x=function(e){return e.contacts.list},v=function(e){return e.contacts.filter},g=function(e){return e.contacts.loading},k=n(9),C=n.n(k),w=n(17),_=n(13),y=n.n(_),N=n(2),L=Object(N.b)("auth/fetchContactsRequest"),S=Object(N.b)("auth/fetchContactsSuccess"),q=Object(N.b)("auth/fetchContactsError"),I=Object(N.b)("auth/addContactRequest"),T=Object(N.b)("auth/addContactSuccess"),A=Object(N.b)("auth/addContactError"),E=Object(N.b)("auth/deleteContactRequest"),R=Object(N.b)("auth/deleteContactSuccess"),F=Object(N.b)("auth/deleteContactError"),M=Object(N.b)("auth/filterAction"),D=function(e){y.a.defaults.headers.common.Authorization="Bearer ".concat(e)},U=function(){y.a.defaults.headers.common.Authorization=""},B=function(){return function(){var e=Object(w.a)(C.a.mark((function e(t){var n,c,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("userToken"),D(n),t(L()),e.prev=3,e.next=6,y.a.get("/contacts");case 6:c=e.sent,a=c.data,t(S(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t(q(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(w.a)(C.a.mark((function t(n){var c,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(I()),t.prev=1,t.next=4,y.a.post("/contacts",e);case 4:c=t.sent,a=c.data,n(T(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(A(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},V=function(e){return function(){var t=Object(w.a)(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(E()),t.prev=1,t.next=4,y.a.delete("/contacts/".concat(e));case 4:n(R(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(F(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},z=n.p+"static/media/add.ec327133.png",H=n(26),G=n.n(H);var K=function(){var e=Object(u.b)(),t=Object(c.useState)(f),n=Object(j.a)(t,2),a=n[0],r=n[1],o=Object(u.c)(x);Object(c.useEffect)((function(){e(B())}),[e]);var s=function(e){var t=e.target,n=t.name,c=t.value;r((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(l.a)({},n,c))}))},b=function(){r({name:"",number:""})};return Object(i.jsx)("div",{className:G.a.formAdd,children:Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault(),o.find((function(e){return e.name.toLowerCase()===a.name.toLowerCase()||e.number===a.number}))?alert("\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442!!!"):e(J(a)),b()},children:[Object(i.jsx)("input",Object(O.a)(Object(O.a)({className:G.a.input,value:a.name},m),{},{onChange:s})),Object(i.jsx)("input",Object(O.a)(Object(O.a)({className:G.a.input,value:a.number},h),{},{onChange:s})),Object(i.jsx)("button",{type:"submit",className:G.a.btnAdd,children:Object(i.jsx)("img",{src:z,width:50})})]})})},Q=n.p+"static/media/remove.c815fcfa.png",W=n(37),X=n.n(W),P=function(){var e=Object(u.b)(),t=Object(u.c)(x),n=Object(u.c)(v).toLowerCase(),c=t.filter((function(e){var t=e.name,c=e.number;return t.toLowerCase().includes(n)||c.includes(n)})).map((function(t){var n=t.id,c=t.name,a=t.number;return Object(i.jsxs)("li",{className:X.a.contactListItem,children:[Object(i.jsxs)("p",{children:[c," |=> ",a]}),Object(i.jsx)("button",{type:"button",onClick:function(){return e(V(n))},className:X.a.btnDelete,children:Object(i.jsx)("img",{src:Q,width:20})})]},n)}));return Object(i.jsx)(i.Fragment,{children:c})};var Y=function(){var e=Object(u.c)(v),t=Object(u.b)();return Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",value:e,onChange:function(e){var n=e.target.value;t(M(n))}})})},Z=n(48),$=n.n(Z);var ee=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(Y,{}),Object(i.jsx)("ul",{className:$.a.contactList,children:Object(i.jsx)(P,{})})]})};function te(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(u.c)((function(e){return function(e){return!!e.auth.token}(e)})),o=Object(u.c)((function(e){return x(e)})),s=Object(u.c)(g),b=r&&o.length>0?Object(i.jsx)(ee,{}):Object(i.jsx)("p",{children:"Contact list is empty!!!"}),l=s?Object(i.jsx)("p",{children:".....Loading"}):b,O=n?"Close contact":"Open contact";return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(K,{}),Object(i.jsx)("button",{type:"button",onClick:function(){return a(!n)},children:O}),n&&l]})}var ne=Object(c.memo)(te),ce=n(8),ae={placeholder:"name",type:"text",name:"name",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:"required"},re={placeholder:"password",type:"password",name:"password",required:"required"},oe={placeholder:"email",type:"email",name:"email",required:"required"},se={name:"",email:"",password:""},ue={email:"",password:""},ie=Object(N.b)("auth/registerRequest"),be=Object(N.b)("auth/registerSuccess"),je=Object(N.b)("auth/registerError"),le=Object(N.b)("auth/loginRequest"),Oe=Object(N.b)("auth/loginSuccess"),de=Object(N.b)("auth/loginError"),pe=Object(N.b)("auth/registerRequest"),fe=Object(N.b)("auth/logoutSuccess"),me=Object(N.b)("auth/logoutError"),he=Object(N.b)("auth/getCurrentUserRequest"),xe=Object(N.b)("auth/getCurrentUserSuccess"),ve=Object(N.b)("auth/getCurrentUserError");y.a.defaults.baseURL="https://connections-api.herokuapp.com";var ge=n(22),ke=n.n(ge);var Ce=function(){var e=Object(u.b)(),t=Object(c.useState)(se),n=Object(j.a)(t,2),a=n[0],r=n[1],o=function(e){var t=e.target,n=t.name,c=t.value;r(Object(O.a)(Object(O.a)({},a),{},Object(l.a)({},n,c)))},s=function(){r({name:"",email:"",password:""})},b=p.a.generate(),d=p.a.generate(),f=p.a.generate();return Object(i.jsx)("div",{className:ke.a.wrapper,children:Object(i.jsxs)("form",{onSubmit:function(t){var n;t.preventDefault(),e((n=a,function(){var e=Object(w.a)(C.a.mark((function e(t){var c,a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ie()),e.prev=1,e.next=4,y.a.post("/users/signup",n);case 4:c=e.sent,a=c.data,localStorage.setItem("userToken",a.token),r=localStorage.getItem("userToken"),D(r),t(be(a)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t(je(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}())),s()},className:ke.a.signin,children:[Object(i.jsx)("input",Object(O.a)(Object(O.a)({className:ke.a.name,id:b,value:a.name},ae),{},{onChange:o})),Object(i.jsx)("input",Object(O.a)(Object(O.a)({className:ke.a.email,id:d,value:a.email},oe),{},{onChange:o})),Object(i.jsx)("input",Object(O.a)(Object(O.a)({className:ke.a.pass,id:f,value:a.password},re),{},{onChange:o})),Object(i.jsx)("button",{type:"submit",children:"Reg"}),Object(i.jsx)("p",{children:Object(i.jsx)(ce.b,{to:"/login",className:"flipper",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438."})})]})})},we=n(27),_e=n.n(we);var ye=function(){var e=Object(u.b)(),t=Object(c.useState)(ue),n=Object(j.a)(t,2),a=n[0],r=n[1],o=function(e){var t=e.target,n=t.name,c=t.value;r(Object(O.a)(Object(O.a)({},a),{},Object(l.a)({},n,c)))},s=function(){r(Object(O.a)({},ue))},b=p.a.generate(),d=p.a.generate();return Object(i.jsx)("div",{className:_e.a.wrapper,children:Object(i.jsxs)("form",{onSubmit:function(t){var n;t.preventDefault(),e((n=a,function(){var e=Object(w.a)(C.a.mark((function e(t){var c,a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(le()),e.prev=1,e.next=4,y.a.post("/users/login",n);case 4:c=e.sent,a=c.data,localStorage.setItem("userToken",a.token),r=localStorage.getItem("userToken"),D(r),t(Oe(a)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t(de(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}())),s()},className:_e.a.signin,children:[Object(i.jsx)("input",Object(O.a)(Object(O.a)({className:_e.a.email,id:b,value:a.email},oe),{},{onChange:o})),Object(i.jsx)("input",Object(O.a)(Object(O.a)({className:_e.a.pass,id:d,value:a.password},re),{},{onChange:o})),Object(i.jsx)("button",{type:"submit",children:"Go"}),Object(i.jsxs)("p",{children:[" ",Object(i.jsx)(ce.b,{to:"/register",children:"\u0415\u0449\u0451 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 ? \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0441\u044f!"})]})]})})},Ne=function(){return Object(i.jsx)("div",{})},Le=function(e){return!!e.auth.token},Se=function(e){return e.auth.user.name},qe=n(20),Ie=n.n(qe),Te=function(){var e=Object(u.c)(Le);return Object(i.jsxs)("div",{children:[Object(i.jsx)(ce.c,{exact:!0,to:"/",className:Ie.a.link,activeClassName:Ie.a.activeLink,children:" \u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e&&Object(i.jsx)(ce.c,{exact:!0,to:"/contacts",className:Ie.a.link,activeClassName:Ie.a.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),e&&Object(i.jsx)(ce.c,{exact:!0,to:"/todo",className:Ie.a.link,activeClassName:Ie.a.activeLink,children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"})]})},Ae=n(28),Ee=n.n(Ae),Re=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(ce.c,{exact:!0,to:"/register",className:Ee.a.link,activeClassName:Ee.a.activeLink,children:" \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(i.jsx)(ce.c,{exact:!0,to:"/login",className:Ee.a.link,activeClassName:Ee.a.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},Fe=n.p+"static/media/avatar.7e1fdb02.png";var Me=function(){var e=Object(u.b)(),t={userMenu:{display:"flex",alignItems:"center"},img:{border:"2px solid black"}},n=Object(u.c)(Se);return Object(i.jsxs)("div",{style:t.userMenu,children:[Object(i.jsx)("img",{style:t,src:Fe,alt:"",width:50}),Object(i.jsxs)("span",{children:["Hello , ",n," "]}),Object(i.jsx)("button",{type:"button",onClick:function(){return e(function(){var e=Object(w.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("userToken",""),t(pe()),e.prev=2,e.next=5,y.a.post("/users/logout");case 5:U(),t(fe()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t(me(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]})};var De=function(){var e=Object(u.c)(Le);return Object(i.jsxs)("header",{style:{display:"flex",height:"70px",justifyContent:"space-between",alignItems:"center",borderBottom:"2px solid black"},children:[Object(i.jsx)(Te,{}),e?Object(i.jsx)(Me,{}):Object(i.jsx)(Re,{})]})},Ue=function(){return Object(i.jsx)(De,{})},Be=n(33),Je=function(e){var t=e.component,n=e.redirectTo,c=Object(Be.a)(e,["component","redirectTo"]),a=Object(u.c)(Le);return Object(i.jsx)(s.b,Object(O.a)(Object(O.a)({},c),{},{render:function(e){return a?Object(i.jsx)(t,Object(O.a)({},e)):Object(i.jsx)(s.a,{to:n})}}))},Ve=function(e){var t=e.component,n=e.redirectTo,c=Object(Be.a)(e,["component","redirectTo"]),a=Object(u.c)(Le);return Object(i.jsx)(s.b,Object(O.a)(Object(O.a)({},c),{},{render:function(e){return a&&c.restricted?Object(i.jsx)(s.a,{to:n}):Object(i.jsx)(t,Object(O.a)({},e))}}))};var ze,He,Ge,Ke,Qe,We,Xe=function(){var e=Object(u.b)();return Object(c.useEffect)((function(){e(function(){var e=Object(w.a)(C.a.mark((function e(t,n){var c,a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=localStorage.getItem("userToken")){e.next=3;break}return e.abrupt("return");case 3:return D(c),t(he()),e.prev=5,e.next=8,y.a.get("/users/current");case 8:a=e.sent,r=a.data,t(xe(r)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),t(ve(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())}),[]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Ue,{}),Object(i.jsx)(c.Suspense,{fallback:Object(i.jsx)("p",{children:"....Loading"}),children:Object(i.jsxs)(s.d,{children:[Object(i.jsx)(Ve,{exact:!0,path:"/",component:b,redirectTo:"/login"}),Object(i.jsx)(Je,{exact:!0,path:"/contacts",component:ne,redirectTo:"/login"}),Object(i.jsx)(Je,{exact:!0,path:"/todo",component:Ne,redirectTo:"/login"}),Object(i.jsx)(Ve,{exact:!0,path:"/register",restricted:!0,component:Ce,redirectTo:"/"}),Object(i.jsx)(Ve,{exact:!0,path:"/login",restricted:!0,component:ye,redirectTo:"/"})]})})]})},Pe=n(25),Ye=n(12),Ze={name:null,email:null},$e=Object(N.c)(Ze,(ze={},Object(l.a)(ze,be,(function(e,t){return t.payload.user})),Object(l.a)(ze,Oe,(function(e,t){return t.payload.user})),Object(l.a)(ze,fe,(function(e,t){t.payload;return Ze})),Object(l.a)(ze,xe,(function(e,t){return t.payload})),ze)),et=Object(N.c)(localStorage.getItem("userToken"),(He={},Object(l.a)(He,be,(function(e,t){return t.payload.token})),Object(l.a)(He,Oe,(function(e,t){return t.payload.token})),Object(l.a)(He,fe,(function(){return null})),He)),tt=Object(N.c)(null,(Ge={},Object(l.a)(Ge,je,(function(e,t){return t.payload})),Object(l.a)(Ge,Oe,(function(e,t){return t.payload})),Object(l.a)(Ge,me,(function(e,t){return t.payload})),Object(l.a)(Ge,ve,(function(e,t){return t.payload})),Object(l.a)(Ge,be,(function(){return null})),Object(l.a)(Ge,Oe,(function(){return null})),Object(l.a)(Ge,fe,(function(){return null})),Object(l.a)(Ge,xe,(function(){return null})),Ge)),nt=Object(Ye.b)({user:$e,token:et,error:tt}),ct=n(34),at=Object(N.c)([],(Ke={},Object(l.a)(Ke,S,(function(e,t){var n=t.payload;return Object(ct.a)(n)})),Object(l.a)(Ke,T,(function(e,t){var n=t.payload;return[].concat(Object(ct.a)(e),[n])})),Object(l.a)(Ke,R,(function(e,t){var n=t.payload;return Object(ct.a)(e).filter((function(e){return e.id!==n}))})),Ke)),rt=Object(N.c)("",Object(l.a)({},M,(function(e,t){return t.payload}))),ot=Object(N.c)(!1,(Qe={},Object(l.a)(Qe,L,(function(){return!0})),Object(l.a)(Qe,S,(function(){return!1})),Qe)),st=Object(N.c)(null,(We={},Object(l.a)(We,q,(function(e,t){return t.payload})),Object(l.a)(We,A(),(function(e,t){return t.payload})),Object(l.a)(We,F,(function(e,t){return t.payload})),Object(l.a)(We,S,(function(){return null})),Object(l.a)(We,T,(function(){return null})),Object(l.a)(We,R,(function(){return null})),We)),ut=Object(Ye.b)({list:at,filter:rt,loading:ot,error:st}),it=Object(N.c)([],{}),bt=Object(N.c)([],{}),jt=Object(N.c)([],{}),lt=Object(Ye.b)({todo:it,error:bt,loading:jt}),Ot=Object(N.d)(Pe.a),dt=Object(N.a)({reducer:{auth:nt,contacts:ut,todo:lt},middleware:Ot});var pt=function(){return Object(i.jsx)(u.a,{store:dt,children:Object(i.jsx)(ce.a,{children:Object(i.jsx)(Xe,{})})})};o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(pt,{})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.350273b4.chunk.js.map